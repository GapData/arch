

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Volatility Forecasting &mdash; arch 4.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="arch 4.0 documentation" href="../index.html"/>
        <link rel="up" title="Univariate Volatility Models" href="univariate.html"/>
        <link rel="next" title="Mean Models" href="mean.html"/>
        <link rel="prev" title="Forecasting" href="forecasting.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> arch
          

          
          </a>

          
            
            
              <div class="version">
                4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="univariate.html">Univariate Volatility Models</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="univariate_volatility_modeling.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecasting.html">Forecasting</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Forecasting Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data">Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-forecasting">Basic Forecasting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alternative-forecast-generation-schemes">Alternative Forecast Generation Schemes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fixed-window-forecasting">Fixed Window Forecasting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rolling-window-forecasting">Rolling Window Forecasting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recursive-forecast-generation">Recursive Forecast Generation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tarch">TARCH</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#analytical-forecasts">Analytical Forecasts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#simulation-forecasts">Simulation Forecasts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bootstrap-forecasts">Bootstrap Forecasts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mean.html">Mean Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="volatility.html">Volatility Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="distribution.html">Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="background.html">Background and References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bootstrap/bootstrap.html">Bootstrapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../multiple-comparison/multiple-comparisons.html">Multiple Comparison Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unitroot/unitroot.html">Unit Root Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">arch</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="univariate.html">Univariate Volatility Models</a> &raquo;</li>
      
    <li>Volatility Forecasting</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/univariate/univariate_volatility_forecasting.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="volatility-forecasting">
<h1>Volatility Forecasting<a class="headerlink" href="#volatility-forecasting" title="Permalink to this headline">¶</a></h1>
<p><em>This setup code is required to run in an IPython notebook</em></p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span>import warnings
warnings.simplefilter(&#39;ignore&#39;)

%matplotlib inline
import seaborn
seaborn.mpl.rcParams[&#39;figure.figsize&#39;] = (10.0, 6.0)
seaborn.mpl.rcParams[&#39;savefig.dpi&#39;] = 90
</pre></div>
</div>
<div class="section" id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<p>These examples make use of S&amp;P 500 data from Yahoo! using the
pandas-datareader package to manage data download.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span> <span class="kn">as</span> <span class="nn">dt</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">pandas_datareader.data</span> <span class="kn">as</span> <span class="nn">web</span>

<span class="kn">from</span> <span class="nn">arch</span> <span class="kn">import</span> <span class="n">arch_model</span>

<span class="n">start</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sp500</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">get_data_yahoo</span><span class="p">(</span><span class="s1">&#39;^GSPC&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">)</span>
<span class="n">returns</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">sp500</span><span class="p">[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-forecasting">
<h2>Basic Forecasting<a class="headerlink" href="#basic-forecasting" title="Permalink to this headline">¶</a></h2>
<p>Forecasts can be generated for standard GARCH(p,q) processes using any
of the three forecast generation methods:</p>
<ul class="simple">
<li>Analytical</li>
<li>Simulation-based</li>
<li>Bootstrap-based</li>
</ul>
<p>Be default forecasts will only be produced for the final observation in
the sample so that they are out-of-sample.</p>
<p>Forecasts start with specifying the model and estimating parameters.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">am</span> <span class="o">=</span> <span class="n">arch_model</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">vol</span><span class="o">=</span><span class="s1">&#39;Garch&#39;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">o</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;Normal&#39;</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">update_freq</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>Iteration:      5,   Func. Count:     39,   Neg. LLF: 6031.2332529686
Iteration:     10,   Func. Count:     71,   Neg. LLF: 6028.8808621264125
Optimization terminated successfully.    (Exit mode 0)
            Current function value: 6028.88083147
            Iterations: 11
            Function evaluations: 78
            Gradient evaluations: 11
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">forecasts</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">forecast</span><span class="p">()</span>
</pre></div>
</div>
<p>Forecasts are contained in an <code class="docutils literal"><span class="pre">ARCHModelForecast</span></code> object which has 4
attributes:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">mean</span></code> - The forecast means</li>
<li><code class="docutils literal"><span class="pre">residual_variance</span></code> - The forecast residual variances, that is
<span class="math">\(E_t[\epsilon_{t+h}^2]\)</span></li>
<li><code class="docutils literal"><span class="pre">variance</span></code> - The forecast variance of the process,
<span class="math">\(E_t[r_{t+h}^2]\)</span>. The variance will differ from the residual
variance whenever the model has mean dynamics, e.g., in an AR
process.</li>
<li><code class="docutils literal"><span class="pre">simulations</span></code> - An object that contains detailed information about
the simulations used to generate forecasts. Only used if the forecast
<code class="docutils literal"><span class="pre">method</span></code> is set to <code class="docutils literal"><span class="pre">'simulation'</span></code> or <code class="docutils literal"><span class="pre">'bootstrap'</span></code>. If using
<code class="docutils literal"><span class="pre">'analytical'</span></code> (the default), this is <code class="docutils literal"><span class="pre">None</span></code>.</li>
</ul>
<p>The three main outputs are all returned in <code class="docutils literal"><span class="pre">DataFrame</span></code>s with columns
of the form <code class="docutils literal"><span class="pre">h.#</span></code> where <code class="docutils literal"><span class="pre">#</span></code> is the number of steps ahead. That is,
<code class="docutils literal"><span class="pre">h.1</span></code> corresponds to one-step ahead forecasts while <code class="docutils literal"><span class="pre">h.10</span></code>
corresponds to 10-steps ahead.</p>
<p>The default forecast only produces 1-step ahear forecasts.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">forecasts</span><span class="o">.</span><span class="n">mean</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
<span class="k">print</span><span class="p">(</span><span class="n">forecasts</span><span class="o">.</span><span class="n">residual_variance</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
<span class="k">print</span><span class="p">(</span><span class="n">forecasts</span><span class="o">.</span><span class="n">variance</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>                 h.1
Date
2016-12-16       NaN
2016-12-19       NaN
2016-12-20  0.052183
                 h.1
Date
2016-12-16       NaN
2016-12-19       NaN
2016-12-20  0.383782
                 h.1
Date
2016-12-16       NaN
2016-12-19       NaN
2016-12-20  0.383782
</pre></div>
</div>
<p>Longer horizon forecasts can be computed by passing the parameter
<code class="docutils literal"><span class="pre">horizon</span></code>.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">forecasts</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">forecast</span><span class="p">(</span><span class="n">horizon</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">forecasts</span><span class="o">.</span><span class="n">residual_variance</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>                 h.1       h.2       h.3       h.4       h.5
Date
2016-12-16       NaN       NaN       NaN       NaN       NaN
2016-12-19       NaN       NaN       NaN       NaN       NaN
2016-12-20  0.383782  0.398705  0.413379  0.427808  0.441996
</pre></div>
</div>
<p>Values that are not computed are <code class="docutils literal"><span class="pre">nan</span></code>-filled.</p>
</div>
<div class="section" id="alternative-forecast-generation-schemes">
<h2>Alternative Forecast Generation Schemes<a class="headerlink" href="#alternative-forecast-generation-schemes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fixed-window-forecasting">
<h3>Fixed Window Forecasting<a class="headerlink" href="#fixed-window-forecasting" title="Permalink to this headline">¶</a></h3>
<p>Fixed-windows forecasting uses data up to a specified date to generate
all forecasts after that date. This cna be implemented by passing the
entire data in when initializing the model and then using <code class="docutils literal"><span class="pre">last_obs</span></code>
when calling <code class="docutils literal"><span class="pre">fit</span></code>. <code class="docutils literal"><span class="pre">forecast()</span></code> will, by default, produce forecasts
after this final date.</p>
<p><strong>Note</strong> <code class="docutils literal"><span class="pre">last_obs</span></code> follow Python sequence rules so that the actual
date in <code class="docutils literal"><span class="pre">last_obs</span></code> is not in the sample.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">last_obs</span> <span class="o">=</span> <span class="s1">&#39;2011-1-1&#39;</span><span class="p">,</span> <span class="n">update_freq</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">forecasts</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">forecast</span><span class="p">(</span><span class="n">horizon</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">forecasts</span><span class="o">.</span><span class="n">variance</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>Iteration:      5,   Func. Count:     38,   Neg. LLF: 4157.973788419826
Iteration:     10,   Func. Count:     72,   Neg. LLF: 4155.670884337866
Optimization terminated successfully.    (Exit mode 0)
            Current function value: 4155.66693192
            Iterations: 13
            Function evaluations: 90
            Gradient evaluations: 13
                 h.1       h.2       h.3       h.4       h.5
Date
2010-12-31  0.361732  0.371332  0.380859  0.390314  0.399697
2011-01-03  0.437698  0.446723  0.455681  0.464570  0.473393
2011-01-04  0.413819  0.423025  0.432162  0.441229  0.450228
2011-01-05  0.406429  0.415691  0.424883  0.434005  0.443059
2011-01-06  0.388142  0.397542  0.406871  0.416130  0.425318
</pre></div>
</div>
</div>
<div class="section" id="rolling-window-forecasting">
<h3>Rolling Window Forecasting<a class="headerlink" href="#rolling-window-forecasting" title="Permalink to this headline">¶</a></h3>
<p>Rolling window forecasts use a fixed sample length and then produce
one-step from the final observation. These can be implemented using
<code class="docutils literal"><span class="pre">first_obs</span></code> and <code class="docutils literal"><span class="pre">last_obs</span></code>.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">index</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">index</span>
<span class="n">start_loc</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">end_loc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="s1">&#39;2010-1-1&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="n">forecasts</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">first_obs</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">last_obs</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="n">end_loc</span><span class="p">,</span> <span class="n">disp</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">forecast</span><span class="p">(</span><span class="n">horizon</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">variance</span>
    <span class="n">fcast</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">end_loc</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">forecasts</span><span class="p">[</span><span class="n">fcast</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fcast</span>
<span class="k">print</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">forecasts</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>....................
                 h.1       h.2       h.3
2009-12-31  0.592770  0.599537  0.606258
2010-01-04  0.741695  0.747594  0.753455
2010-01-05  0.697177  0.703327  0.709438
2010-01-06  0.650562  0.656987  0.663370
2010-01-07  0.618261  0.624963  0.631622
2010-01-08  0.582740  0.589653  0.596520
2010-01-11  0.546604  0.553743  0.560836
2010-01-12  0.584582  0.591458  0.598288
2010-01-13  0.594898  0.601701  0.608459
2010-01-14  0.559686  0.566699  0.573665
2010-01-15  0.619233  0.625857  0.632437
2010-01-19  0.689729  0.695906  0.702042
2010-01-20  0.734718  0.740607  0.746457
2010-01-21  0.968062  0.972529  0.976966
2010-01-22  1.291619  1.294309  1.296981
2010-01-25  1.207096  1.210234  1.213352
2010-01-26  1.132550  1.136086  1.139598
2010-01-27  1.064376  1.068281  1.072160
2010-01-28  1.102316  1.106104  1.109867
2010-01-29  1.103033  1.106945  1.110831
</pre></div>
</div>
</div>
<div class="section" id="recursive-forecast-generation">
<h3>Recursive Forecast Generation<a class="headerlink" href="#recursive-forecast-generation" title="Permalink to this headline">¶</a></h3>
<p>Recursive is similar to rolling except that the initial observation
doesn&#8217;t change. This can be easily implemented by dropping the
<code class="docutils literal"><span class="pre">first_obs</span></code> input.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">index</span>
<span class="n">start_loc</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">end_loc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="s1">&#39;2010-1-1&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="n">forecasts</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">last_obs</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="n">end_loc</span><span class="p">,</span> <span class="n">disp</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">forecast</span><span class="p">(</span><span class="n">horizon</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">variance</span>
    <span class="n">fcast</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">end_loc</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">forecasts</span><span class="p">[</span><span class="n">fcast</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fcast</span>
<span class="k">print</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">forecasts</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>....................
                 h.1       h.2       h.3
2009-12-31  0.592770  0.599537  0.606258
2010-01-04  0.740400  0.746181  0.751923
2010-01-05  0.696335  0.702391  0.708405
2010-01-06  0.650194  0.656541  0.662845
2010-01-07  0.617491  0.624048  0.630560
2010-01-08  0.582186  0.588973  0.595713
2010-01-11  0.546313  0.553336  0.560311
2010-01-12  0.584236  0.591003  0.597725
2010-01-13  0.594504  0.601203  0.607858
2010-01-14  0.559554  0.566476  0.573352
2010-01-15  0.618935  0.625469  0.631960
2010-01-19  0.689213  0.695305  0.701357
2010-01-20  0.734042  0.739855  0.745629
2010-01-21  0.965800  0.970214  0.974599
2010-01-22  1.285115  1.287657  1.290182
2010-01-25  1.202055  1.205083  1.208091
2010-01-26  1.128661  1.132120  1.135556
2010-01-27  1.061641  1.065497  1.069326
2010-01-28  1.097353  1.100992  1.104607
2010-01-29  1.096228  1.099871  1.103490
</pre></div>
</div>
</div>
</div>
<div class="section" id="tarch">
<h2>TARCH<a class="headerlink" href="#tarch" title="Permalink to this headline">¶</a></h2>
<div class="section" id="analytical-forecasts">
<h3>Analytical Forecasts<a class="headerlink" href="#analytical-forecasts" title="Permalink to this headline">¶</a></h3>
<p>All ARCH-type models have one-step analytical forecasts. Longer horizons
only have closed forms for specific models. TARCH models do not have
closed-form (analytical) forecasts for horizons larger than 1, and so
simulation or bootstrapping is required. Attempting to produce forecasts
for horizons larger than 1 using <code class="docutils literal"><span class="pre">method='analytical'</span></code> results in a
<code class="docutils literal"><span class="pre">ValueError</span></code>.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># TARCH specification</span>
<span class="n">am</span> <span class="o">=</span> <span class="n">arch_model</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">vol</span><span class="o">=</span><span class="s1">&#39;GARCH&#39;</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">o</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">update_freq</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">forecasts</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">forecast</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">forecasts</span><span class="o">.</span><span class="n">variance</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>Iteration:      5,   Func. Count:     44,   Neg. LLF: 5932.033656743306
Iteration:     10,   Func. Count:     81,   Neg. LLF: 5928.216764723273
Optimization terminated successfully.    (Exit mode 0)
            Current function value: 5928.21663785
            Iterations: 13
            Function evaluations: 102
            Gradient evaluations: 13
h.1    0.311969
Name: 2016-12-20 00:00:00, dtype: float64
</pre></div>
</div>
</div>
<div class="section" id="simulation-forecasts">
<h3>Simulation Forecasts<a class="headerlink" href="#simulation-forecasts" title="Permalink to this headline">¶</a></h3>
<p>When using simulation- or bootstrap-based forecasts, an additional
attribute of an <code class="docutils literal"><span class="pre">ARCHModelForecast</span></code> object is meaningful &#8211;
<code class="docutils literal"><span class="pre">simulation</span></code>.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">conditional_volatility</span><span class="p">[</span><span class="s1">&#39;2016&#39;</span><span class="p">]</span> <span class="o">**</span> <span class="mf">2.0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Conditional Variance&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x188fd9ef748&gt;
</pre></div>
</div>
<img alt="../_images/output_24_1.png" src="../_images/output_24_1.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">forecasts</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">forecast</span><span class="p">(</span><span class="n">horizon</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;simulation&#39;</span><span class="p">)</span>
<span class="n">sims</span> <span class="o">=</span> <span class="n">forecasts</span><span class="o">.</span><span class="n">simulations</span>

<span class="n">lines</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sims</span><span class="o">.</span><span class="n">residual_variances</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,::</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#9cb2d6&#39;</span><span class="p">)</span>
<span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Simulated path&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hold</span><span class="p">(</span><span class="s1">&#39;on&#39;</span><span class="p">)</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">forecasts</span><span class="o">.</span><span class="n">variance</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#002868&#39;</span><span class="p">)</span>
<span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Expected variance&#39;</span><span class="p">)</span>
<span class="n">legend</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/output_25_01.png" src="../_images/output_25_01.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">sims</span><span class="o">.</span><span class="n">variances</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x18880340f28&gt;
</pre></div>
</div>
<img alt="../_images/output_26_1.png" src="../_images/output_26_1.png" />
</div>
<div class="section" id="bootstrap-forecasts">
<h3>Bootstrap Forecasts<a class="headerlink" href="#bootstrap-forecasts" title="Permalink to this headline">¶</a></h3>
<p>Bootstrap-based forecasts are nearly identical to simulation-based
forecasts except that the values used to simulate the process are
computed from historical data rather than using the assumed distribution
of the residuals. Forecasts produced using this method also return an
<code class="docutils literal"><span class="pre">ARCHModelForecastSimulation</span></code> containing information about the
simulated paths.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">forecasts</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">forecast</span><span class="p">(</span><span class="n">horizon</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bootstrap&#39;</span><span class="p">)</span>
<span class="n">sims</span> <span class="o">=</span> <span class="n">forecasts</span><span class="o">.</span><span class="n">simulations</span>

<span class="n">lines</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sims</span><span class="o">.</span><span class="n">residual_variances</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,::</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#9cb2d6&#39;</span><span class="p">)</span>
<span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Simulated path&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hold</span><span class="p">(</span><span class="s1">&#39;on&#39;</span><span class="p">)</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">forecasts</span><span class="o">.</span><span class="n">variance</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#002868&#39;</span><span class="p">)</span>
<span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Expected variance&#39;</span><span class="p">)</span>
<span class="n">legend</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/output_28_0.png" src="../_images/output_28_0.png" />
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mean.html" class="btn btn-neutral float-right" title="Mean Models" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="forecasting.html" class="btn btn-neutral" title="Forecasting" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-6, Kevin Sheppard.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'4.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>